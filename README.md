# Read.Me

## 0. 프로젝트 시작하기 🎉

1. **zip.파일을 해제합니다.**

```json
//no-tag파일로 이동합니다.
cd no-tag

docker-compose build
docker-compose up -d
```

1. 아래 사진과 같이 된다면,
   <br>프론트엔드 : http://localhost:3000/ 로 방문해주세요🙇🏻‍♀️
   <br>백엔드 : http://localhost:8080
   <img src="./img/시작하기.png">

## 1. 개발 중점

<img src="./img/생각하는사람.png">

상품 관리자가 상품을 편리하게 관리하고, 확장 가능성을 중점으로 프로젝트를 진행하였습니다.

수정이 잦을 최근 생성된 브랜드와 상품 목록을 메인화면에 제공 하고 Navigation Bar에 **브랜드 검색**을 두어 접근성과 편의성을 높였습니다.

**카테고리의 경우**, 관리자가 카테고리 분류를 원하는 depth 만큼 만들고 조회할 수 있도록 **클로저 테이블**을 사용하여 개발하였습니다.

repository pattern을 사용하여 저장소를 다루는 로직을 데이터 레이어로 분리하여 서비스 레이어에서 핵심 비지니스 로직에 집중할 수 있도록 개발하였습니다.

## 2. 기술 스택

|           |                             |                                                                                                                                                                                                |
| --------- | --------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Front-end | React                       | 생산성을 위해 컴포넌트를 재사용할 수 있고, JSX를 지원하는 Reat를 선택하게 되었습니다.                                                                                                          |
| Back-end  | Nest.js,TypeScript, TypeORM | 타입을 명시하여 코드의 신뢰성을 높일 수 있는 **타입스크립트**와 모듈식 아키텍처로 Module간에 쉽게 인스턴스를 공유할 수 있고 느슨한 결합으로 유지보수가 쉬운 Nest.js를 선택하여 개발하였습니다. |
| Data      | PostgreSQL                  | DB를 컴파일하지 않고도 다른 프로그래밍 언어로 작성할 수 있는 PostgreSQL을 사용하게되었습니다.                                                                                                  |
| ect       | REST                        | 자원을 효율적으로 사용하기 위해 API는 REST 아키텍처를 기반으로 사용하였습니다.                                                                                                                 |
| ect       | Docker                      | 다양한 환경에서도 환경의 일관성과 재현성을 제공하기 위해 도커를 사용하였습니다.                                                                                                                |

## 3. ERD

<img src="./img/ERD.png">

- 테이블 구조는 `카테고리`, `카테고리 클로저`, `카테고리_상품`, `판매`, `브랜드`, `상품` 으로 구성되어있습니다.
- 카테고리는 TYPEORM의 `클로저 테이블`을 사용하여 자식과 부모 카테고리의 PK를 가진 테이블이 트리 형식으로 데이터를 조회할 수 있도록 구성하였습니다.
- 각 자원을 생성하고 업데이트 하는 API에서는 **TypeORM dataSource** 객체 내의 **`transaction`** , **`transactionalEntityManager.save` 를 사용하여 원자성을 보장하였습니다.**
- `카테고리` 와 `상품` 테이블은 Many to Many로 구성하여 핸드폰 상품의 여러 카테고리를 조회할 수 있도록 구성하였습니다.

## 4. 주요 기능

1. **특정 브랜드를 검색하거나 전체 상품 목록**을 조회할 수 있습니다.
2. **카테고리별로 구분**해서 상품을 조회할 수 있습니다.
3. **브랜드의 판매 수량**을 파악할 수 있습니다.
4. 각 상품 별 **판매 수량을 파악하고 수정**할 수 있습니다.
## 6. API 명세서

명세서 :
https://thunder-year-be8.notion.site/API-34275290b937419cab8ee94597113e7e?pvs=4

| NO. | Method | URL                       | 기능                                              |
| --- | ------ | ------------------------- | ------------------------------------------------- |
| 1   | GET    | /brands                   | 브랜드 조회                                       |
| 2   | POST   | /brands                   | 브랜드 생성                                       |
| 3   | GET    | /brands/new               | 최근 생성된 브랜드 조회                           |
| 4   | GET    | /brands/:id               | id 값을 가진 브랜드 조회                          |
| 5   | GET    | /category                 | 카테고리 조회                                     |
| 6   | POST   | /category                 | 카테고리 생성                                     |
| 7   | GET    | /category/root            | 최상단 ROOT 카테고리 조회                         |
| 8   | GET    | /category/:id             | id 값을 가진 카테고리 조회                        |
| 9   | GET    | /category/descendants/:id | id 값을 가진 카테고리와 자식 카테고리의 제품 조회 |
| 10  | GET    | /category/ancestors/:id   | id 값을 가진 카테고리의 부모 조회                 |
| 11  | GET    | /products                 | 제품 조회                                         |
| 12  | POST   | /products                 | 제품 생성                                         |
| 13  | GET    | /products/new             | 최근 생성된 제품 조회                             |
| 14  | GET    | /products/:id             | id 값을 가진 제품 조회                            |
| 15  | GET    | /sales                    | 판매 조회                                         |
| 16  | POST   | /sales                    | 판매 생성                                         |
| 17  | Patch  | /sales/:id/salesCount     | 판매 수정                                         |
| 18  | GET    | /sales/:id                | id 값을 가진 판매 조회                            |
| 19  | GET    | /sales/brands/:id         | id 값을 가진 브랜드의 판매 조회                   |
| 20  | GET    | /sales/rank/:limit        | 판매가 가장 많은 브랜드의 limit까지의 순위 조회   |
